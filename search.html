<script src="https://raw.githubusercontent.com/juction4love/bimalpharmacy/main/medicines.js"></script>

<script>
    // Note: This script assumes 'medicines.js' defines a variable named 'medicineData'
    const resultsContainer = document.getElementById('resultsList');
    const searchInput = document.getElementById('medicineSearch');
    const countDisplay = document.getElementById('resultsCount');

    function displayResults(query = '') {
        resultsContainer.innerHTML = '';
        const filter = query.toLowerCase().trim();

        // Check if medicineData loaded correctly
        if (typeof medicineData === 'undefined') {
            resultsContainer.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: red;">डाटा लोड हुन सकेन (medicines.js not found).</p>';
            return;
        }

        const filtered = medicineData.filter(item => 
            item.Product.toLowerCase().includes(filter) || 
            item.Category.toLowerCase().includes(filter) ||
            item.Use_for.toLowerCase().includes(filter)
        );

        countDisplay.innerText = filter ? `${filtered.length} वटा औषधी भेटिए` : `कूल ${medicineData.length} औषधीहरू उपलब्ध छन्`;

        const itemsToRender = filtered.slice(0, 100);

        if (itemsToRender.length === 0) {
            resultsContainer.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 50px;"><p>कुनै औषधी भेटिएन।</p></div>';
            return;
        }

        itemsToRender.forEach(item => {
            const card = document.createElement('div');
            card.className = 'card medicine-result-card';
            card.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span class="category-tag">${item.Category}</span>
                    <span class="price-tag">Rs. ${item.S_price}</span>
                </div>
                <h3 style="margin: 15px 0 5px; color: var(--dark); font-size: 1.3rem;">${item.Product}</h3>
                <p class="med-use"><strong>प्रयोग:</strong> ${item.Use_for}</p>
                <p class="side-effects-text"><strong>असरहरू:</strong> ${item.Side_effects.join(', ')}</p>
                <a href="https://wa.me/9779855065327?text=नमस्ते विमल फार्मेसी, मलाई यो अर्डर गर्नु छ: ${item.Product}" 
                   target="_blank" class="order-btn-whatsapp">
                    <i class="fab fa-whatsapp"></i> अर्डर गर्नुहोस्
                </a>
            `;
            resultsContainer.appendChild(card);
        });
    }

    // Initial display
    displayResults('');

    // Search input listener
    searchInput.addEventListener('input', (e) => {
        displayResults(e.target.value);
    });
</script>
