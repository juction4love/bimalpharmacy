<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>औषधी खोज्नुहोस् | विमल फार्मेसी</title>
  
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <style>
    /* Search Specific Layout */
    .search-container {
        max-width: 800px;
        margin: 20px auto;
        padding: 0 15px;
    }
    .search-wrapper {
        position: relative;
        margin-bottom: 30px;
    }
    #medInput {
        width: 100%;
        padding: 15px 20px 15px 45px;
        font-size: 1.1rem;
        border: 2px solid var(--primary);
        border-radius: 50px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .search-icon {
        position: absolute;
        left: 18px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--primary);
    }
    .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 50px;
    }
    .med-card {
        background: white;
        padding: 20px;
        border-radius: 12px;
        border-left: 5px solid var(--primary);
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .med-card h3 { color: var(--dark); margin-bottom: 10px; font-size: 1.2rem; }
    .med-card .tag {
        font-size: 0.8rem;
        background: #e8f5e9;
        color: #2e7d32;
        padding: 3px 8px;
        border-radius: 4px;
        font-weight: bold;
    }
    .med-card .price {
        display: block;
        margin-top: 15px;
        font-weight: bold;
        color: var(--primary);
        font-size: 1.1rem;
    }
    #loader { text-align: center; padding: 20px; font-weight: bold; color: #666; }
    .no-results { text-align: center; grid-column: 1/-1; padding: 40px; color: #999; }
  </style>
</head>
<body>

  <header class="text-header">
    <h1>विमल फार्मेसी</h1>
    <p><i class="fas fa-map-marker-alt"></i> क्यान्सर अस्पताल रोड, भरतपुर-७, चितवन | <i class="fas fa-phone"></i> ०५६-५९३२८८</p>
  </header>

  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="index.html">गृहपृष्ठ</a></li>
      <li><a href="search.html" class="active">खोज्नुहोस्</a></li>
      <li><a href="order.html">अर्डर गर्नुहोस्</a></li>
      <li><a href="service.html">सेवाहरू</a></li>
      <li><a href="notice.html">सूचना</a></li>
      <li><a href="about.html">जानकारी</a></li>
      <li><a href="contact.html">सम्पर्क</a></li>
    </ul>
  </nav>

  <main class="search-container">
    <div style="text-align: center; margin-top: 30px;">
        <h2 style="color: var(--primary);">औषधीको विवरण खोज्नुहोस्</h2>
        <p>७,००० भन्दा बढी औषधी र सर्जिकल सामानहरू उपलब्ध छन्।</p>
    </div>

    <div class="search-wrapper">
        <i class="fas fa-search search-icon"></i>
        <input type="text" id="medInput" placeholder="औषधीको नाम वा श्रेणी लेख्नुहोस्..." onkeyup="performSearch()">
    </div>

    <div id="loader">डाटा लोड हुँदैछ, कृपया केही क्षण पर्खनुहोस्...</div>
    <div id="resultsCount" style="margin-bottom: 15px; font-weight: bold;"></div>
    <div id="resultsGrid" class="results-grid"></div>
  </main>

  <footer>
    <div class="footer-info">
      <strong>विमल फार्मेसी</strong><br>
      क्यान्सर अस्पताल रोड, भरतपुर-७, चितवन, नेपाल<br>
      <i class="fas fa-phone"></i> ०५६-५९३२८८ | <i class="fas fa-envelope"></i> admin@bimalpharmacy.com.np
    </div>
    <p>&copy; २०२६ विमल फार्मेसी। सर्वाधिकार सुरक्षित।</p>
  </footer>

  <script>
    let medicines = [];

    // Fetch from GitHub Root
    async function loadData() {
        try {
            const response = await fetch('./medicines.json');
            medicines = await response.json();
            document.getElementById('loader').style.display = 'none';
        } catch (error) {
            document.getElementById('loader').innerText = "डाटा लोड गर्न सकिएन। कृपया रिफ्रेस गर्नुहोस्।";
        }
    }

    function performSearch() {
        const query = document.getElementById('medInput').value.toLowerCase();
        const grid = document.getElementById('resultsGrid');
        const count = document.getElementById('resultsCount');
        
        if (query.length < 2) {
            grid.innerHTML = "";
            count.innerText = "";
            return;
        }

        // Search logic
        const filtered = medicines.filter(m => 
            m["Product Name"].toLowerCase().includes(query) || 
            m["category"].toLowerCase().includes(query)
        ).slice(0, 50); // Show top 50 for performance

        count.innerText = `${filtered.length} वटा नतिजाहरू भेटिए।`;

        if (filtered.length === 0) {
            grid.innerHTML = `<div class="no-results">तपाईंले खोज्नुभएको औषधी भेटिएन। कृपया अर्को नाम प्रयास गर्नुहोस्।</div>`;
            return;
        }

        grid.innerHTML = filtered.map(m => `
            <div class="med-card">
                <span class="tag">${m["category"]}</span>
                <h3>${m["Product Name"]}</h3>
                <p><strong>उपयोग:</strong> ${m["Medicine use for"]}</p>
                <p style="font-size: 0.9rem; color: #666;"><strong>साइड इफेक्ट:</strong> ${m["side effect"]}</p>
                <span class="price">NPR ${m["Sales price"]}</span>
            </div>
        `).join('');
    }

    // Initial Load
    loadData();
  </script>
</body>
</html>
