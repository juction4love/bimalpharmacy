<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AI Medicine Search | Bimal Pharmacy</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* --- CSS Variables --- */
    :root {
      --primary: #2e7d32;
      --light-bg: #f8fafc;
      --white: #ffffff;
      --gemini-color: #4285f4;
      --gemini-gradient: linear-gradient(135deg, #4285f4, #d96570);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body { background-color: var(--light-bg); padding-bottom: 80px; color: #333; }

    /* Header */
    .app-header {
      background: var(--white); padding: 15px 5%;
      position: sticky; top: 0; z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex; justify-content: space-between; align-items: center;
    }
    .brand { font-size: 1.4rem; font-weight: 800; color: var(--primary); display: flex; align-items: center; gap: 10px; }
    .brand img { height: 40px; width: 40px; border-radius: 50%; }

    .desktop-nav { display: none; }
    .desktop-nav a { text-decoration: none; color: #555; font-weight: 600; margin-left: 20px; }
    .desktop-nav a.active { color: var(--primary); }

    /* Search Section */
    .search-section {
      text-align: center; padding: 40px 20px;
      background: var(--white); border-bottom: 1px solid #ddd;
    }
    .search-wrapper {
      max-width: 600px; margin: 20px auto 0; position: relative; display: flex; gap: 10px;
    }
    .search-input {
      width: 100%; padding: 15px 20px; border-radius: 50px;
      border: 2px solid #ddd; font-size: 1.1rem; outline: none; transition: 0.3s;
    }
    
    .btn-search {
      background: var(--gemini-gradient); color: white; border: none;
      width: 55px; height: 55px; border-radius: 50%; cursor: pointer;
      display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
    }

    /* Result Box */
    .ai-container { max-width: 800px; margin: 30px auto; padding: 0 20px; }
    .ai-card {
      background: white; border-radius: 20px; padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      border-top: 5px solid #4285f4;
      display: none; 
    }
    .ai-content { font-size: 1rem; line-height: 1.7; color: #444; }

    /* Loader */
    .loader { display: none; text-align: center; margin-top: 20px; }
    .spinner {
      width: 40px; height: 40px; border: 4px solid #f3f3f3;
      border-top: 4px solid var(--gemini-color); border-radius: 50%;
      animation: spin 1s linear infinite; margin: 0 auto;
    }

    /* Mobile Nav */
    .mobile-nav {
      position: fixed; bottom: 0; left: 0; width: 100%;
      background: white; display: grid; grid-template-columns: repeat(5, 1fr);
      padding: 10px 0; border-top: 1px solid #eee; z-index: 1001;
    }
    .nav-item { text-align: center; text-decoration: none; color: #999; font-size: 0.7rem; }
    .nav-item i { display: block; font-size: 1.3rem; margin-bottom: 4px; }
    .nav-item.active { color: var(--primary); }

    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @media (min-width: 769px) { .mobile-nav { display: none; } .desktop-nav { display: block; } }
  </style>
</head>
<body>

  <header class="app-header">
    <div class="brand">
      <img src="https://raw.githubusercontent.com/juction4love/bimalpharmacy/main/logo.svg" alt="Logo">
      <span>Bimal Pharmacy</span>
    </div>
    <nav class="desktop-nav">
      <a href="index.html">गृहपृष्ठ</a>
      <a href="search.html" class="active">AI Search</a>
      <a href="order.html">अर्डर</a>
      <a href="contact.html">सम्पर्क</a>
    </nav>
  </header>

  <section class="search-section">
    <h2 style="background: var(--gemini-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">AI Pharmacist</h2>
    <p style="color: #666; margin-top: 5px;">औषधीको नाम लेख्नुहोस् र तुरुन्तै जानकारी पाउनुहोस्</p>
    
    <div class="search-wrapper">
      <input type="text" id="aiInput" class="search-input" placeholder="e.g. Paracetamol" onkeypress="handleEnter(event)">
      <button onclick="fetchGeminiAnswer()" class="btn-search">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </section>

  <div class="ai-container">
    <div id="loadingBox" class="loader">
      <div class="spinner"></div>
      <p style="margin-top: 10px; color: #666;">AI ले सोच्दैछ...</p>
    </div>

    <div id="aiResultBox" class="ai-card">
      <div id="aiText" class="ai-content"></div>
      <div style="margin-top: 20px; font-size: 0.8rem; color: #888; text-align: center;">
        *जानकारी मात्र। डाक्टरको सल्लाह लिनुहोस्।
      </div>
    </div>
  </div>

  <nav class="mobile-nav">
    <a href="index.html" class="nav-item"><i class="fas fa-home"></i> होम</a>
    <a href="search.html" class="nav-item active"><i class="fas fa-robot"></i> AI</a>
    <a href="order.html" class="nav-item"><i class="fas fa-file-prescription"></i> अर्डर</a>
    <a href="emergency.html" class="nav-item"><i class="fas fa-ambulance"></i> आपतकालीन</a>
    <a href="contact.html" class="nav-item"><i class="fas fa-user"></i> सम्पर्क</a>
  </nav>

  <script>
    // --- FINAL CONFIGURATION ---
    const API_KEY = "AIzaSyBly_wvcUIeFdcfpvNKgo1co98EHcQTwdE"; 
    // ---------------------------

    function handleEnter(e) {
      if (e.key === 'Enter') fetchGeminiAnswer();
    }

    async function fetchGeminiAnswer() {
      const input = document.getElementById('aiInput').value.trim();
      const loader = document.getElementById('loadingBox');
      const resultBox = document.getElementById('aiResultBox');
      const textBox = document.getElementById('aiText');

      if (!input) return;

      resultBox.style.display = "none";
      loader.style.display = "block";
      
      const prompt = `Act as a pharmacist. Explain "${input}" in simple Nepali. Include Uses, Dosage, Side Effects, Warning.`;

      try {
        // Using 'gemini-pro' model for stability
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify
