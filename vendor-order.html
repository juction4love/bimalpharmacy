<div class="card" style="border-top: 8px solid var(--primary, #2e7d32); background: #ffffff; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 600px; margin: 30px auto; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    
    <div style="text-align: center; margin-bottom: 25px;">
        <h2 style="color: #1b5e20; margin-bottom: 5px;">
            <i class="fas fa-file-invoice"></i> Vendor Order Slip
        </h2>
        <p style="font-size: 0.9rem; color: #666;">рдмрд┐рдорд▓ рдлрд╛рд░реНрдореЗрд╕реА - рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдЦрд░рд┐рдж рдЕрд░реНрдбрд░</p>
    </div>
    
    <div style="display: flex; justify-content: space-between; background: #f1f8f1; padding: 10px 15px; border-radius: 10px; margin-bottom: 20px; font-size: 0.85rem; color: #333; font-weight: bold; border: 1px solid #e0e0e0;">
      <span><i class="far fa-calendar-alt"></i> рдорд┐рддрд┐: <span id="currentDate"></span></span>
      <span style="color: #d32f2f;">ID: <span id="orderID"></span></span>
    </div>

    <div style="margin-bottom: 15px;">
        <label style="font-weight: 700; display: block; margin-bottom: 8px; color: #444;">рд╡рд┐рдХреНрд░реЗрддрд╛ / рд╕рдкреНрд▓рд╛рдпрд░рдХреЛ рдирд╛рдо:</label>
        <div style="position: relative;">
            <i class="fas fa-truck" style="position: absolute; left: 15px; top: 15px; color: #888;"></i>
            <input type="text" id="vendorName" placeholder="рд╕рдкреНрд▓рд╛рдпрд░ рд╡рд╛ рдХрдореНрдкрдиреАрдХреЛ рдирд╛рдо" style="width: 100%; padding: 12px 12px 12px 45px; border-radius: 12px; border: 1px solid #ccc; outline: none; font-size: 1rem; transition: 0.3s; background: #fafafa;">
        </div>
    </div>

    <div style="margin-bottom: 20px;">
        <label style="font-weight: 700; display: block; margin-bottom: 8px; color: #444;">рд╕рд╛рдорд╛рдирдХреЛ рд╡рд┐рд╡рд░рдг (Items List):</label>
        <textarea id="itemList" rows="8" placeholder="рдЙрджрд╛: &#10;1. Paracetamol 500mg - 10 Boxes&#10;2. Pantoprazole 40mg - 5 Boxes" style="width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ccc; font-family: inherit; outline: none; font-size: 1rem; background: #fafafa; resize: vertical;"></textarea>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
        <button type="button" onclick="sendToMe()" style="background: #075E54; color: white; padding: 16px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 1rem; transition: 0.3s; box-shadow: 0 4px 10px rgba(7, 94, 84, 0.2);">
            <i class="fab fa-whatsapp"></i> My WhatsApp
        </button>

        <button type="button" onclick="chooseSupplier()" style="background: #2e7d32; color: white; padding: 16px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 1rem; transition: 0.3s; box-shadow: 0 4px 10px rgba(46, 125, 50, 0.2);">
            <i class="fas fa-share-alt"></i> Any Supplier
        </button>
    </div>

    <button type="button" onclick="clearForm()" style="background: #f5f5f5; color: #d32f2f; width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.9rem; transition: 0.2s;">
        <i class="fas fa-trash-alt"></i> Clear Form (рдЦрд╛рд▓реА рдЧрд░реНрдиреБрд╣реЛрд╕реН)
    </button>
    
    <p style="text-align: center; font-size: 0.75rem; color: #888; margin-top: 20px;">
      <i class="fas fa-info-circle"></i> рдбреЗрд╕реНрдХрдЯрдкрдорд╛ <b>WhatsApp Web</b> рд░ рдореЛрдмрд╛рдЗрд▓рдорд╛ <b>WhatsApp App</b> рдЦреБрд▓реНрдиреЗрдЫред
    </p>
</div>

<script>
    // рез. рдкреЗрдЬ рд▓реЛрдб рд╣реБрдБрджрд╛ рдорд┐рддрд┐ рд░ рдирдпрд╛рдБ рдЖрдИрдбреА рд╕реЗрдЯ рдЧрд░реНрдиреЗ
    function setupOrder() {
        // рдиреЗрдкрд╛рд▓реА рдорд┐рддрд┐ рдлрд░реНрдореНрдпрд╛рдЯ
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('currentDate').innerText = new Date().toLocaleDateString('ne-NP', options);
        
        // рдпреБрдирд┐рдХ рдЕрд░реНрдбрд░ рдЖрдИрдбреА (BIMAL + Random Number)
        const randomNum = Math.floor(1000 + Math.random() * 9000);
        document.getElementById('orderID').innerText = 'BIMAL-' + randomNum;
    }
    
    setupOrder();

    // реи. рдореЗрд╕реЗрдЬ рддрдпрд╛рд░ рдкрд╛рд░реНрдиреЗ рдлрдЩреНрд╕рди (Common Logic)
    function createMessage() {
        const vName = document.getElementById('vendorName').value.trim() || "рд╕рдкреНрд▓рд╛рдпрд░";
        const items = document.getElementById('itemList').value.trim();
        const date = document.getElementById('currentDate').innerText;
        const id = document.getElementById('orderID').innerText;

        if (!items) {
            alert("рдХреГрдкрдпрд╛ рд╕рд╛рдорд╛рдирдХреЛ рд╡рд┐рд╡рд░рдг (Items List) рднрд░реНрдиреБрд╣реЛрд╕реНред");
            return null;
        }

        // рд╢рд┐рд╖реНрдЯ рднрд╛рд╖рд╛ рд░ рдкреНрд░рд╕реНрдЯ рдлрд░реНрдореНрдпрд╛рдЯрдорд╛ рдореЗрд╕реЗрдЬ
        return "рдирдорд╕реНрддреЗ " + vName + " Sir, ЁЯЩП%0A" +
               "рдо рдмрд┐рдорд▓ рдлрд╛рд░реНрдореЗрд╕реА, рднрд░рддрдкреБрд░рдмрд╛рдЯ рдмрд┐рдорд▓ рд▓рд╛рдорд┐рдЫрд╛рдиреЗ рдмреЛрд▓реЗрдХреЛред%0A%0A" +
               "рд╣рд╛рдореАрд▓рд╛рдИ рдХреЗрд╣реА рд╕рд╛рдорд╛рдирд╣рд░реВ рдЖрд╡рд╢реНрдпрдХ рдкрд░реЗрдХреЛрд▓реЗ рдпреЛ *Purchase Order* рдкрдард╛рдПрдХреЛ рдЫреБред рдХреГрдкрдпрд╛ рдпреА рд╕рд╛рдорд╛рдирд╣рд░реВ рдЙрдкрд▓рдмреНрдз рдЧрд░рд╛рдИ рд╕рд╣рдпреЛрдЧ рдЧрд░рд┐рджрд┐рдиреБрд╣реЛрд▓рд╛:%0A%0A" +
               "тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ%0A" +
               "ЁЯУМ *ITEMS LIST:*%0A" + 
               "тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ%0A" +
               encodeURIComponent(items) + "%0A" +
               "тФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБтФБ%0A%0A" +
               "ЁЯУЕ *рдорд┐рддрд┐:* " + date + "%0A" +
               "ЁЯФв *ID:* #" + id + "%0A%0A" +
               "рд╕рд╛рдорд╛рди рдХрдиреНрдлрд░реНрдо рднрдПрдкрдЫрд┐ рдорд▓рд╛рдИ рдЬрд╛рдирдХрд╛рд░реА рджрд┐рдиреБрд╣реЛрд▓рд╛ред%0A" +
               "рдзрдиреНрдпрд╡рд╛рджред - рдмрд┐рдорд▓ рд▓рд╛рдорд┐рдЫрд╛рдиреЗ%0A" +
               "ЁЯУЮ репреорелрелрежремрелрейреирен";
    }

    // рей. рдЖрдлреНрдиреИ рдирдореНрдмрд░рдорд╛ рдЕрд░реНрдбрд░ рдкрдард╛рдЙрдиреЗ (For Records)
    function sendToMe() {
        const msg = createMessage();
        if(msg) {
            const myNum = "9779855065327";
            window.open("https://wa.me/" + myNum + "?text=" + msg, '_blank');
        }
    }

    // рек. рдХрдиреНрдЯреНрдпрд╛рдХреНрдЯ рд▓рд┐рд╖реНрдЯрдмрд╛рдЯ рд╕рдкреНрд▓рд╛рдпрд░ рдЫрд╛рдиреНрди рдорд┐рд▓реНрдиреЗ
    function chooseSupplier() {
        const msg = createMessage();
        if(msg) {
            window.open("https://wa.me/?text=" + msg, '_blank');
        }
    }

    // рел. рдлрд╛рд░рдо рдЦрд╛рд▓реА рдЧрд░реНрдиреЗ рд░ рдирдпрд╛рдБ рдЕрд░реНрдбрд░рдХреЛ рд▓рд╛рдЧрд┐ рддрдпрд╛рд░ рдкрд╛рд░реНрдиреЗ
    function clearForm() {
        if(confirm("рдХреЗ рддрдкрд╛рдИрдБ рдирдпрд╛рдБ рдЕрд░реНрдбрд░рдХреЛ рд▓рд╛рдЧрд┐ рдлрд╛рд░рдо рдЦрд╛рд▓реА рдЧрд░реНрди рдЪрд╛рд╣рдиреБрд╣реБрдиреНрдЫ?")) {
            document.getElementById('vendorName').value = "";
            document.getElementById('itemList').value = "";
            setupOrder(); // рдЖрдИрдбреА рд░ рдорд┐рддрд┐ рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреЗ
            window.scrollTo(0, 0); // рдорд╛рдерд┐ рд╕реНрдХреНрд░реЛрд▓ рдЧрд░реНрдиреЗ
        }
    }
</script>
